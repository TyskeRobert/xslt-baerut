{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://github.com/TyskeRobert/xslt-baerut/blob/main/json/schema/manuscript",
    "title": "source",
    "description": "Transcription of a single manuscript or part of it",
    "type": "object",
    "properties": {
        "date": {
            "type": "string",
            "format": "date-time",
            "description": "Date stamp for the creation of the JSON file"
        },
        "id": {
            "type": "string",
            "description": "The source document's ID, also its file name without extension",
            "pattern": "^[\\w-]+$"
        },
        "source": {
            "title": "SOURCE",
            "type": "object",
            "properties": {
                "header": {
                    "$ref": "#/$defs/header"
                },
                "text": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/token"
                    },
                    "minItems": 1
                }
            },
            "required": [
                "header",
                "text"
            ],
            "additionalProperties": false
        }
    },
    "required": [
        "date",
        "id",
        "source"
    ],
    "additionalProperties": false,
    "$defs": {
        "agent": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "affiliations": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "name"
            ],
            "additionalProperties": false
        },
        "availability": {
            "type": "object",
            "properties": {
                "licence": {
                    "enum": [
                        "CC-BY-SA 4.0"
                    ]
                },
                "status": {
                    "enum": [
                        "free"
                    ]
                },
                "url": {
                    "type": "string"
                }
            },
            "required": [
                "licence",
                "status",
                "url"
            ],
            "additionalProperties": false
        },
        "country": {
            "type": "object",
            "properties": {
                "code": {
                    "enum": [
                        "DK",
                        "ICE",
                        "IS",
                        "SE"
                    ]
                },
                "name": {
                    "enum": [
                        "Denmark",
                        "Iceland"
                    ]
                }
            },
            "required": [
                "name"
            ],
            "additionalProperties": false
        },
        "editionStmt": {
            "type": "object",
            "properties": {
                "date": {
                    "type": "string",
                    "format": "date"
                },
                "number": {
                    "type": "string",
                    "pattern": "^\\d(\\.\\d){1,2}$"
                }
            },
            "required": [
                "date",
                "number"
            ],
            "additionalProperties": false
        },
        "editorialDecl": {
            "type": "object",
            "properties": {
                "interpretation": {
                    "type": "object",
                    "properties": {
                        "lemma": {
                            "enum": [
                                "completely",
                                "none"
                            ]
                        },
                        "morph": {
                            "enum": [
                                "completely",
                                "none",
                                "partly"
                            ]
                        }
                    },
                    "required": [
                        "lemma",
                        "morph"
                    ],
                    "additionalProperties": false
                },
                "normalization": {
                    "type": "object",
                    "properties": {
                        "dipl": {
                            "type": "boolean"
                        },
                        "facs": {
                            "type": "boolean"
                        },
                        "norm": {
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "dipl",
                        "facs",
                        "norm"
                    ],
                    "additionalProperties": false
                }
            },
            "required": [
                "interpretation",
                "normalization"
            ],
            "additionalProperties": false
        },
        "encodingDesc": {
            "type": "object",
            "properties": {
                "editorialDecl": {
                    "$ref": "#/$defs/editorialDecl"
                }
            },
            "required": [
                "editorialDecl"
            ],
            "additionalProperties": false
        },
        "fileDesc": {
            "type": "object",
            "properties": {
                "editionStmt": {
                    "$ref": "#/$defs/editionStmt"
                },
                "publicationStmt": {
                    "$ref": "#/$defs/publicationStmt"
                },
                "sourceDesc": {
                    "$ref": "#/$defs/sourceDesc"
                },
                "titleStmt": {
                    "$ref": "#/$defs/titleStmt"
                }
            },
            "required": [
                "editionStmt",
                "titleStmt"
            ],
            "additionalProperties": false
        },
        "header": {
            "type": "object",
            "properties": {
                "encodingDesc": {
                    "$ref": "#/$defs/encodingDesc"
                },
                "fileDesc": {
                    "$ref": "#/$defs/fileDesc"
                }
            },
            "required": [
                "encodingDesc",
                "fileDesc"
            ],
            "additionalProperties": false
        },
        "msDesc": {
            "type": "object",
            "properties": {
                "msIdentifier": {
                    "$ref": "#/$defs/msIdentifier"
                }
            },
            "required": [
                "msIdentifier"
            ],
            "additionalProperties": false
        },
        "msIdentifier": {
            "type": "object",
            "properties": {
                "country": {
                    "$ref": "#/$defs/country"
                },
                "idno": {
                    "type": "string"
                },
                "msName": {
                    "type": "string"
                },
                "repository": {
                    "enum": [
                        "Den Arnamagnæanske Samling",
                        "Stofnun Árna Magnússonar",
                        "Stofnun Árna Magnússonar í íslenskum fræðum",
                        "The Arnamagnæan Collection",
                        "The Arnamagnaean Collection, University of Copenhagen",
                        "The Arnamagnæan Institute",
                        "The Árni Magnússon Institute for Icelandic Studies, Reykjavík, Iceland"
                    ]
                },
                "settlement": {
                    "enum": [
                        "Copenhagen",
                        "Reykjavik",
                        "Reykjavík"
                    ]
                }
            },
            "required": [
                "country",
                "idno",
                "msName",
                "repository",
                "settlement"
            ],
            "additionalProperties": false
        },
        "publicationStmt": {
            "type": "object",
            "properties": {
                "availability": {
                    "$ref": "#/$defs/availability"
                },
                "date": {
                    "type": "string",
                    "format": "date"
                },
                "distributor": {
                    "type": "string"
                },
                "idno": {
                    "type": "string"
                }
            },
            "required": [
                "availability",
                "distributor",
                "idno"
            ],
            "additionalProperties": false
        },
        "responsibility": {
            "type": "object",
            "properties": {
                "agents": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/agent"
                    },
                    "minItems": 1
                },
                "responsibilities": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 1
                }
            },
            "required": [
                "agents",
                "responsibilities"
            ],
            "additionalProperties": false
        },
        "sourceDesc": {
            "type": "object",
            "properties": {
                "msDesc": {
                    "$ref": "#/$defs/msDesc"
                }
            },
            "required": [
                "msDesc"
            ],
            "additionalProperties": false
        },
        "titleStmt": {
            "type": "object",
            "properties": {
                "editors": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/agent"
                    },
                    "minItems": 1
                },
                "respStmt": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/responsibility"
                    },
                    "minimum": 0
                },
                "title": {
                    "type": "string"
                }
            },
            "required": [
                "editors",
                "respStmt",
                "title"
            ],
            "additionalProperties": false
        },
        "token": {
            "type": "object",
            "properties": {
                "t": {
                    "enum": [
                        "add",
                        "app",
                        "cb",
                        "del",
                        "div",
                        "gap",
                        "handShift",
                        "head",
                        "hi",
                        "l",
                        "lb",
                        "lem",
                        "lg",
                        "p",
                        "pb",
                        "pc",
                        "rdg",
                        "seg",
                        "sic",
                        "space",
                        "supplied",
                        "surplus",
                        "unclear",
                        "w"
                    ]
                }
            },
            "required": [
                "t"
            ],
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "add"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "hand": {
                                    "$ref": "#/$defs/handID"
                                },
                                "place": {
                                    "type": "string",
                                    "enum": [
                                        "between columns",
                                        "head",
                                        "infralinear",
                                        "inline",
                                        "interlinear",
                                        "left",
                                        "line above",
                                        "maragin-top",
                                        "margi-top",
                                        "margin",
                                        "marginal",
                                        "marginleft",
                                        "margin-bot",
                                        "margin-left",
                                        "margin-right",
                                        "margin-top",
                                        "margin left",
                                        "margin right",
                                        "margin top",
                                        "red",
                                        "supralinear",
                                        "younger"
                                    ]
                                },
                                "instant": {
                                    "const": "false"
                                },
                                "status": {
                                    "const": "unremarkable"
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "cb"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "ed": {
                                "$ref": "#/$defs/edMarker"
                            },
                            "n": {
                                "type": "string",
                                "pattern": "^[AB]$"
                            }
                        },
                        "required": [
                            "n"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "del"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "rend": {
                                    "type": "string",
                                    "enum": [
                                        "erasure",
                                        "overstrike",
                                        "subpunction"
                                    ]
                                },
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "overstrike"
                                    ]
                                },
                                "instant": {
                                    "const": "false"
                                },
                                "status": {
                                    "const": "unremarkable"
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "div"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "n": {
                                    "type": "string"
                                },
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "Bǿjarlǫg-Magnúss-Hákonarsonar",
                                        "chaapter",
                                        "chapter",
                                        "initial",
                                        "Kristinréttr-hinn-eldri-Frostaþings",
                                        "Kristinréttr-Magnúss-Hákonarsonar",
                                        "Landslǫg-Magnúss-Hákonarsonar",
                                        "law-manuscript",
                                        "Réttarbǿtr",
                                        "saga",
                                        "subchapter",
                                        "Um-tíund",
                                        "work"
                                    ]
                                },
                                "subtype": {
                                    "type": "string",
                                    "enum": [
                                        "not-yet-divided"
                                    ]
                                },
                                "org": {
                                    "const": "uniform"
                                },
                                "part": {
                                    "const": "N"
                                },
                                "sample": {
                                    "const": "complete"
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "gap"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "quantity": {
                                "type": "string",
                                "pattern": "^\\d$"
                            },
                            "reason": {
                                "type": "string",
                                "enum": [
                                    "missing"
                                ]
                            },
                            "unit": {
                                "type": "string",
                                "enum": [
                                    "char",
                                    "leaf"
                                ]
                            },
                            "instant": {
                                "const": "false"
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "handShift"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "n": {
                                "$ref": "#/$defs/handID"
                            }
                        },
                        "required": [
                            "n"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "hi"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "rend": {
                                    "type": "string",
                                    "enum": [
                                        "red"
                                    ]
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "l"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "part": {
                                    "const": "N"
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "lb"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "ed": {
                                "$ref": "#/$defs/edMarker"
                            },
                            "n": {
                                "type": "string",
                                "pattern": "^\\d{1,2}(oat)?$"
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "lg"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "n": {
                                    "type": "string",
                                    "pattern": "^h?\\d{1,3}$"
                                },
                                "org": {
                                    "const": "uniform"
                                },
                                "part": {
                                    "const": "N"
                                },
                                "sample": {
                                    "const": "complete"
                                }
                            },
                            "required": [
                                "n"
                            ]
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "p"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "part": {
                                    "const": "N"
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "pb"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "ed": {
                                "$ref": "#/$defs/edMarker"
                            },
                            "n": {
                                "type": "string",
                                "pattern": "^\\d{1,3}[rv]?$"
                            }
                        },
                        "required": [
                            "n"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "pc"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "base": {
                                "type": "string"
                            },
                            "dipl": {
                                "type": "string"
                            },
                            "facs": {
                                "type": "string"
                            },
                            "norm": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "dipl",
                            "facs",
                            "norm"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "rdg"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "wit": {
                                    "type": "string",
                                    "enum": [
                                        "AM18",
                                        "AM18b",
                                        "AM28",
                                        "AM36",
                                        "AM38",
                                        "AM70",
                                        "not_stated"
                                    ]
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "seg"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "rend": {
                                    "type": "string",
                                    "enum": [
                                        "column right",
                                        "line 1-6",
                                        "line 1-7",
                                        "line 1-8",
                                        "line 2-8",
                                        "line 4-9",
                                        "line 4-10",
                                        "line 6-13",
                                        "line 11-14",
                                        "line 11-16"
                                    ]
                                },
                                "part": {
                                    "const": "N"
                                }
                            },
                            "required": [
                                "rend"
                            ]
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "space"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "quantity": {
                                "type": "string",
                                "pattern": "^\\d$"
                            },
                            "unit": {
                                "type": "string",
                                "enum": [
                                    "line"
                                ]
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "supplied"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "resp": {
                                    "type": "string",
                                    "enum": [
                                        "editor"
                                    ]
                                },
                                "instant": {
                                    "const": "false"
                                }
                            },
                            "required": [
                                "resp"
                            ]
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "surplus"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "reason": {
                                    "type": "string",
                                    "enum": [
                                        "dittography"
                                    ]
                                },
                                "instant": {
                                    "const": "false"
                                }
                            }
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "unclear"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ],
                        "if": {
                            "properties": {
                                "open": {
                                    "const": true
                                }
                            }
                        },
                        "then": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true,
                                "reason": {
                                    "type": "string",
                                    "enum": [
                                        "faded"
                                    ]
                                },
                                "instant": {
                                    "const": "false"
                                }
                            },
                            "required": [
                                "reason"
                            ]
                        },
                        "else": {
                            "additionalProperties": false,
                            "properties": {
                                "t": true,
                                "open": true
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "const": "w"
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "base": {
                                "type": "string"
                            },
                            "dipl": {
                                "type": "string"
                            },
                            "facs": {
                                "type": "string"
                            },
                            "lemma": {
                                "type": "string"
                            },
                            "morph": {
                                "type": "string"
                            },
                            "norm": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "base",
                            "dipl",
                            "facs",
                            "lemma",
                            "morph",
                            "norm"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "enum": [
                                    "app",
                                    "head",
                                    "lem",
                                    "sic"
                                ]
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true,
                            "open": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "open"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "t": {
                                "enum": [
                                ]
                            }
                        }
                    },
                    "then": {
                        "additionalProperties": false,
                        "properties": {
                            "t": true
                        }
                    }
                }
            ]
        },
        "edMarker": {
            "type": "string",
            "enum": [
                "ms"
            ]
        },
        "handID": {
            "type": "string",
            "enum": [
                "",
                "hand1",
                "hand2",
                "hand3",
                "later",
                "laterhand",
                "laterscribe",
                "mainscribe",
                "margin-top",
                "supralinear",
                "younger",
                "younger?"
            ]
        }
    }
}